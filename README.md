# 思いの竹〜焚き火に灯すやすらぎ〜

## サービス概要
「思いの竹〜焚き火に灯すやすらぎ〜」は、ユーザーが心に抱えた思いを入力し、
焚き火に「竹」としてくべて燃やすことで癒しを届けるアプリです。

入力した思いは「焚き火にくべる」ボタンをクリックすることで炎に包まれ、
ゆらゆら揺れる炎と竹のパチパチと爆ぜる音が、心を軽くするひと時を演出します。

燃やした思いは保存されず、完全に消える設計とすることで、
「燃やす＝手放す」という体験を提供します。

## このサービスへの思い・作りたい理由
疲れた時や悩みを抱えていた時に「癒されたい」と感じたことが、このアプリを考えるきっかけでした。  
自分の中でくすぶる「思いのたけ」とひとりで向き合い、消化することで癒されたいと思いました。  
そこで「消化＝燃やす」という発想から、思いの「たけ」を「竹」に重ね合わせ、焚き火に竹をくべるというアイデアにたどり着きました。  

このアプリで届けたいのは「癒しの時間」です。
アプリを開くことがそのままリラックスタイムとなり、炎のゆらぎや竹の音に包まれて心が軽くなる体験をかなえたいと考えています。  

誰しも悩んだり、悩むことに疲れたりするものです。
そんな頑張る人たちに寄り添える、暖かい居場所を届けたい――その思いを込めて「思いの竹」を作ろうと思いました。

## ユーザー層について
### 中心となるユーザー層
- 日常の中で疲れや悩みを抱え、「癒されたい」と感じている人  
- 誰かに共有するのではなく、ひとりで自分の心と向き合いたい人  
- アプリを開くことで、安心してリラックスできる時間を持ちたい人  

**なぜこのユーザー層に届けたいのか**  
日々の生活の中で、ちょっとした悩みに心がくすぶられる瞬間はきっと誰にでもあります。自分の心に耳を傾け、自己と向き合い、癒されたい。そんな人たちに寄り添えるアプリでありたいと考えました。

---

### 日常利用を想定するユーザー層
- 勉強や仕事の合間に、気持ちを切り替えたい人  
- 就寝前にほっと一息つきたい人  
- 焚き火の炎や音を通じて、癒しを感じたい人  

**なぜこのユーザー層に届けたいのか**  
長時間の作業や学習の合間、あるいは寝る前などに「ちょっとした癒し」を取り入れることで、日常が少し軽くなると考えています。開くだけで癒しを感じられるため、日常の習慣として自然に取り入れられると思います。

## サービスの利用イメージ
1. アプリを開くと、焚き火が燃えているトップ画面が表示される。
2. ユーザーがトップ画面内の「思いの竹を燃やす」ボタンをクリックすると、思いを入力する入力欄が表示される。
3. 入力欄に思いを記入し、「焚き火にくべる」ボタンをクリックすると、焚き火に竹がくべられ、炎の演出とともに思いが燃やされる。
4. 燃やした後は入力欄がクリアされ、入力内容は保存されず履歴も残らない。
   （燃やした瞬間に完全に消える設計）

### 想定される使用シーン
- **一日の終わり**：寝る前にアプリを開き、心を落ち着けて眠りにつく  
- **勉強や仕事の合間**：集中が途切れた時に焚き火を眺め、気持ちを切り替える  
- **悩みを抱えた時**：誰かに話す代わりに、思いを託した竹を燃やすことで気持ちを整理する  

### 得られる価値
- 炎のゆらぎや音によるリラックス効果  
- 「燃やす」というアクションを通じた気持ちの整理  
- 誰にも共有せず、自分だけの癒される居場所と時間を持てる安心感  
- 日常の習慣として取り入れやすいシンプルさ  

## ユーザーの獲得について
### 中心となるユーザー層への届け方
- 検索で見つけやすいように「焚き火」「癒し」「心を整理」といったキーワードを説明文に含める  
- Notionなどの紹介ページで「ひとりで向き合う癒しの居場所」という世界観を丁寧に伝える  
- サンプル画面やスクリーンショットを提示し、利用シーンや焚き火の雰囲気を直感的に伝える  

---

### 日常利用を想定するユーザー層への届け方
- 「寝る前」「仕事や勉強の合間」など具体的な利用シーンを示し、日常に取り入れるイメージを持ってもらう  
- デモ画面を通じて、焚き火の炎や音の雰囲気を直感的に伝える  
- 「開くだけで癒しを感じられる」という手軽さを強調し、自然と習慣化につながることを示す  

## サービスの差別化ポイント・推しポイント
### 「自分と向き合う」ための設計
心の整理には、日記を書いたり他者や生成AIに相談したりといった多様な方法があります。  
このアプリは、焚き火に「思いの竹」をくべて燃やす体験を通じて、心と向き合うことを大切にしています。  
ひとりで心静かに、自分の思いに向き合える居場所を提供します。

### 推しポイント
- **映像 + 音 + 燃やすアクションの融合**  
  炎のゆらぎと音と竹を燃やすアクションを組み合わせ、ただ眺めるだけでは得られない没入感を生み出します。 
- **シンプルな利用フロー**  
  直感的な操作で、気軽に体験できる。  
- **安心感のある非共有設計**  
  誰にも見られない安心感があり、心の深い部分まで素直に書き出せる。
  
### 類似サービスとの比較
焚き火による癒し体験は、動画配信サービス等でも楽しむことができます。  
また、生成AIのチャットを使えば、気持ちの整理を一人で行うことも可能です。  
しかし当アプリは「焚き火専用」「自分と向き合う居場所」という点で独自性があります。
以下に類似サービスとの違いを示します。
- 比較対象との類似点
  - 動画配信サービス → 「焚き火映像や音を楽しめる点は共通」
  - 生成AI → 「気持ちや考えの整理を助ける点は共通」

| 観点     | 思いの竹（当アプリ） | 動画配信サービス（例：Youtube） | 生成AIチャット |
|----------|----------|----------------------------|----------------|
| 目的     | ○ 自分と向き合い、癒しを得る居場所 | △ 娯楽・情報消費中心 | △ 他者との対話代替 |
| 没入感   | ○ 広告やコメントなしで集中できる | △ 広告・コメントで中断されることがある | △ 会話に意識が向く |
| 癒し体験 | ○ 映像＋音＋燃やすアクション | △ 映像と音のみ | △ 対話による整理 |
| 機能     | ○ 非共有・焚き火体験 | △ 多機能で雑多 | △ 会話重視 |


## ユーザー登録とデータの扱い

当アプリでは**ユーザー登録を行いません**。入力したテキスト（思い）は一切保存せず、燃やした思いは完全に消える設計です。  

ただし、継続利用の動機付けや体験向上のために、匿名化された最小限の抽象データをサーバ側で保持します。保持方針は以下の通りです。

- **匿名セッションID**  
  - ランダムトークンを用いてセッションを識別します。個人情報とは紐づけません。  

- **保存するデータ（抽象化されたメタデータのみ）**  
  - 当日の燃焼回数（例：今日燃やした竹の数）  
  - 累計日数（利用した日数の合計）  
  - 連続利用日数（ストreak）や炎レベル算出に必要な最小限のカウント値  
  - 上記は**入力テキストや詳細なタイムスタンプを含みません**。  

- **データの管理と削除**  
  - 個別の燃焼イベントは一時的に `burn_events` に記録し、日次バッチで集計して `session_stats` を更新した後、個別イベントは削除します。  
  - 抽象データの保持期間は暫定で**最終利用から90日**とし、期間経過後に削除します。運用に応じて見直します。  

- **プライバシー配慮**  
  - 入力テキストは一切保存しないため、ユーザーの思いが復元されることはありません。  
  - 匿名セッションIDは識別子としてのみ利用し、外部サービスや個人情報と結びつけません。  

- **利用目的**  
  - 日次集計や炎の成長・環境演出のための抽象的な指標として利用します。  
  - 誤用防止や体験維持のための上限管理（例：1日あたりの上限カウント）にも使用します。

上記により「燃やす＝手放す」という設計思想を守りつつ、使うほど価値が積み上がる体験を提供します。```

## 利用制限
- ユーザーは**1日あたり最大10本**まで竹を燃やすことができます。  
- 上限に達した場合、**焚き火の映像と音は引き続き楽しめますが、竹をくべる操作は一時的に無効化**されます。UIでは短い案内を表示します。（例：「今日の分の竹は使い切りました。ゆっくり焚き火をお楽しみください。」）
- カウントはサーバ側で管理し、**翌日0:00 JST** にリセットされます。  
- この上限は誤用防止、体験の価値維持、サーバ負荷軽減を目的とした暫定設定で、フィードバックに応じて調整します。

## 利用日数の扱い
- 利用日数は匿名セッションIDに紐づく抽象的なメタデータとして保持します。MVPでは**累計日数のみ**を保持し、個別の入力テキストや詳細なタイムスタンプは保存しません。  
- 保持期間は暫定で最終利用から**90日**とし、期間経過後は削除します。運用に応じて見直します。  
- 将来的に本リリースで**連続利用日数（ストreak）**を導入する予定です。ストreak導入時はREADMEを更新して判定ルールとUI表示を明記します。

## 炎の成長ルール（概要）
- 炎はサーバ側で管理される**成長値**を持ちます。1回の燃焼で成長値が増加し、成長値に応じて炎レベルが決まります。  
- サーバは炎レベルに応じた描画パラメータ（色、揺らぎの強さ、音の変化）を返却し、フロントは受け取った値に基づいて演出を切り替えます。  
- 成長値は時間経過で徐々に減衰します。利用がないと炎が弱まり、継続利用がない場合は種火に戻ります。  
- 炎の成長は**入力テキストの保存とは無関係**であり、あくまで抽象的な利用履歴に基づく演出です。  

## 炎の成長ルール（詳細）

炎の成長は以下の3つの算出式で管理されます。

### 1. 基本値の算出
  ```
  base_growth = 燃焼回数（日次） + 累計日数ボーナス
  ```
- 燃焼回数（日次）：竹を1本燃やすごとに +1  
- 累計日数ボーナス：  
  - 4〜7日 → +1  
  - 8〜14日 → +2  
  - 15日以上 → +3  

### 2. 減衰値の算出
  ```
  fade = floor(経過時間（時間） / 24)
  ```
- 最終利用からの経過時間を24時間単位で切り捨て  
- 例：48時間経過 → fade = 2  

### 3. 減衰処理
  ```
  growth_value = max(0, base_growth - fade)
  ```
- 減衰値を引いた結果が負数にならないように、最低値を0に制御  
- 炎は「完全に消える＝0（種火）」で止まり、負の値にはならない  

---

### flame_level の算出
  ```
  flame_level = min(10, floor(growth_value / limit))
  ```
- limit = 3（基準値）  
- flame_level は 0〜10 の整数（11段階）  
- UIでは flame_level に応じて炎アイコンを最大10個並べて表示  

### アニメーション表示ルール（4段階）
- flame_level = 0 → 種火（ほぼ消えかけの炎）  
- flame_level = 1〜3 → 炎（小）  
- flame_level = 4〜6 → 炎（中）  
- flame_level = 7〜10 → 炎（大）  

## サンプルケース表

| 燃焼回数 | 累計日数 | ボーナス | 経過時間 | fade値 | growth_value | flame_level | 表示アニメーション |
|----------|----------|----------|----------|--------|--------------|-------------|-------------------|
| 0        | 1日      | +0       | 0時間    | 0      | 0            | 0           | 種火              |
| 3        | 5日      | +1       | 12時間   | 0      | 4            | 1           | 炎（小）          |
| 5        | 10日     | +2       | 24時間   | 1      | 6            | 2           | 炎（中）          |
| 10       | 15日     | +3       | 48時間   | 2      | 11           | 3           | 炎（大）          |
| 7        | 20日     | +3       | 96時間   | 4      | 6            | 2           | 炎（中）          |

## 機能候補
### MVPリリース
- **竹に思いを入力する操作**  
  入力欄に最大280文字まで記入可能。入力後は自動的にクリアされ、保存や履歴は残らない。
- **竹をくべる操作**  
  「焚き火にくべる」ボタンをクリックすると実行される。クリック時に入力欄が閉じ、焚き火画面に戻る。
- **炎のアニメーション**  
  CSSアニメーションで炎の揺らぎを表現。竹をくべた瞬間に炎が一時的に強まり、揺らぎが大きくなる演出を予定。
- **音の演出**  
  焚き火のパチパチ音をループ再生し、竹をくべた瞬間に音量やリズムが一瞬変化することで没入感を強化。
- **竹をくべると炎が一時的に揺らぐ機能**  
  「焚き火にくべる」アクションに応じて炎が反応し、映像と音の両面で動的なリアリティを加える。
- **利用状況の一時保持**  
  Railsで当日の燃焼イベントをDBに一時記録し、「今日燃やした竹の数」をJSTで集計して表示する（翌日0:00に個別イベントを削除）。集計はサーバ側で行い、フロントのローカル状態だけでは再現できない仕様とする。
- **利用制限**  
　1日あたり最大10本まで竹を燃やせる（上限到達時は焚き火は継続して眺められるが、くべる操作は無効化）。カウントはサーバ側で管理し翌日0:00にリセット。
- **炎を育てる機能**  
　アプリ起動時は種火から始まり、竹をくべることで炎が育つ。炎レベルは「当日の燃焼回数」と「累計日数」の両方を基準に算出し、さらに時間経過による減衰処理を加えて決定する。  
　フロントは返却されたレベルに応じて色・揺らぎ・音を切り替える。 
- **累計日数のカウント**  
  - 匿名セッションIDに紐づき、利用した日を1日としてカウントする。  
  - 同一日に複数回利用しても1日分のみ加算。保持期間は暫定で最終利用から90日。  
  - 表示例：`累計利用日数：12日`
 
---

### 本リリース
- **モード選択機能**  
  「自分と向き合うモード」「隙間時間モード」を選べるようにし、利用目的に応じた体験を提供。    
- **バックグラウンド再生機能**  
  他の作業をしながらも焚き火の音や炎を楽しめる。  
- **タイマー機能**  
  勉強や仕事の合間に「ひとときの休憩」として使えるようにする。 
- **環境演出・背景変化機能**  
  継続利用に応じて背景が時間帯や季節に応じて変化する。  
  焚き火以外にも虫の音や風の音などの環境演出を追加し、使うほど新しい発見がある体験を提供する。  
  - 朝：朝日と鳥のさえずり
  - 夕方：夕焼けと虫の声
  - 夜：星空と静かな虫の音
  - 春：桜の花びら、夏：蛍、秋：紅葉、冬：雪景色
- **連続利用日数（ストreak）導入予定**  
  - 将来的に連続利用日数を導入し、毎日1回以上の利用で連続日数が増加する仕様を追加予定。  
  - 判定基準やタイムゾーンはJST基準で明文化し、導入時にREADMEを更新する。  
  - UI表示例：`連続利用：5日目`

## 使用する技術スタック
- 使用するフレームワーク（Ruby on Rails / 7.2.1）
- データベース（PostgreSQL）
- デプロイ先（Render）
- 主な使用Gem（active_storage / stimulus-rails / turbo-rails）

### 画面遷移図
[Figmaで画面遷移を表示](https://dbdiagram.io/d/思いの竹_ER図-694255a7e4bb1dd3a965a657)

## ER図
[ER図リンク](https://dbdiagram.io/d/思いの竹_ER図-694255a7e4bb1dd3a965a657)  

### スクリーンショット
![ER図スクリーンショット](https://gyazo.com/0796161028cae8436db66cffc1e49b43.png)
